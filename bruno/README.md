# Bruno Collection для Equipment API

Эта коллекция содержит все маршруты API для тестирования приложения управления оборудованием.

## Установка Bruno

1. Скачайте Bruno с официального сайта: https://www.usebruno.com/
2. Установите приложение
3. Откройте Bruno и выберите "Open Collection"
4. Укажите папку `bruno` из этого проекта

## Настройка переменных окружения

В файле `Environment.bru` настроены переменные на основе реальных данных из `src/main/resources/`:
- `base_url` - базовый URL сервера (по умолчанию http://localhost:9000)
- `equipment_id_*` - UUID различных единиц оборудования из equipment.csv
- `log_id` - UUID записи журнала из log.csv
- `user_id` - UUID пользователя из users.csv (Иванов Иван Иванович)

**Все запросы используют реальные данные из CSV файлов и готовы к использованию без изменений!**

## Структура коллекции

### 01. Базовые маршруты
- **Ping** - Проверка работоспособности сервера

### 02. Оборудование (23 запроса)
- **Список оборудования** - GET /v2/equipment
- **Получить оборудование** - GET /v2/equipment/{equipment-id} (монитор LG)
- **Добавить оборудование** - POST /v2/equipment (системный блок)
- **Редактировать оборудование** - PATCH /v2/equipment/{equipment-id}
- **Удалить оборудование** - DELETE /v2/equipment/{equipment-id}
- **Свободная техника** - GET /v2/equipment/unused
- **Техника на замену** - GET /v2/equipment/by-time
- **Статистика по категориям** - GET /v2/equipment/statistics?by-type=category
- **Статистика по персонам** - GET /v2/equipment/statistics?by-type=person
- **Добавить монитор** - POST с данными монитора Acer
- **Добавить принтер** - POST с данными принтера Canon
- **Добавить телефон** - POST с данными IP-телефона Cisco
- **Добавить проектор** - POST с данными проектора Epson
- **Редактировать с User null** - PATCH для освобождения оборудования
- **Редактировать только Category** - PATCH с частичным обновлением
- **Редактировать без изменений** - PATCH для проверки 204 ответа
- **Получить принтер** - GET конкретного принтера
- **Получить телефон** - GET конкретного телефона
- **Получить проектор** - GET конкретного проектора
- **Свободная техника все категории** - GET без фильтра
- **Свободная техника только ПК** - GET с фильтром по категории
- **Техника на замену 2029** - GET с датой 2029
- **Техника на замену 2028** - GET с датой 2028

### 03. Пользователи
- **Список пользователей** - GET /v2/users (с проверкой данных Иванова)

### 04. Журнал
- **Получить запись журнала** - GET /v2/log/{log-id}
- **Редактировать запись журнала** - PUT /v2/log/{log-id}
- **Проверить обновленную запись** - GET для проверки изменений

## Использование

1. Убедитесь, что сервер запущен на порту 9000:
   ```bash
   ./gradlew run --args="--equipment-file src/main/resources/equipment.csv --log-file src/main/resources/log.csv --users-file src/main/resources/users.csv --port 9000"
   ```

2. Откройте коллекцию в Bruno

3. Запускайте запросы по порядку или выборочно

4. Все запросы используют реальные данные из CSV файлов и готовы к использованию!

## Реальные данные из CSV

### Оборудование:
- **Монитор LG 20M47D** (1d0f861e-9d0c-4340-acad-69ade7b83085) - 2800₽, склад, не используется
- **Монитор Acer K202HQL** (4cc3098f-fa98-4312-b351-fce99fde825f) - 5700₽, склад, не используется
- **Системный блок Acer** (bf7c82ce-334a-470b-89be-f7ae283ce564) - 15300₽, склад, не используется
- **Принтер Canon** (f463afc0-3088-4ba4-92ae-5859faedc585) - 21550₽, офис кабинет 26, используется
- **IP-телефон Cisco** (d7494a0f-6929-4d71-9bbc-fb067356bfeb) - 6100₽, офис кабинет 26, используется
- **Проектор Epson** (fe385d95-f916-47c0-b042-557435b2e160) - 60600₽, офис кабинет 15, используется
- **Принтер Canon** (f920444e-3741-497c-a6b2-b9fa1bc5b741) - 21550₽, офис кабинет 15, используется

### Пользователь:
- **Иванов Иван Иванович** (de42a00f-7f43-4d10-808d-bee47fdeef49) - Секретарь, IvanovII@crafted.su

### Журнал:
- **Запись о приобретении** (29478648-3524-4d60-9176-22aad1c3bb4a) - монитор LG

## Категории оборудования
- ПК
- Монитор
- Принтер
- Телефон
- Другое

## Формат даты
- Гарантийный срок: `YYYY-MM-DD` (например, `2028-01-01`)
- Дата и время: `YYYY-MM-DDTHH:mm:ss` (например, `2030-01-01T00:00:00.0`)

## Параметры пагинации
- `page` - номер страницы (начиная с 1)
- `records-per-page` - количество записей (5, 10, 20, 50)

## Тесты

Все запросы содержат автоматические тесты, которые проверяют:
- Статус ответа
- Структуру данных
- Соответствие реальным данным из CSV
- Валидность UUID
- Наличие обязательных полей
